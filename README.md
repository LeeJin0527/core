## 비즈니스 요구 사항과 설계
 -회원
  - 회원을 가입하고 조회할 수 있다.
  
  - 회원은 일반과 VIP 두가지 등급이 있다.
  
  - 회원 데이터는 자바 DB를 구축할 수 있고 외부 시스템과 연동할 수 있다.(미확정)
  
-주문과 할인 정책
  - 회원은 상품을 주문할 수 있다.
  
  - 할인 정책은 모든 VIP는 1000원을 할인해주는 고정 금액 할인을 적용해달라(나중에 변경 될 수 있다.)
  
  - 할인 정책은 변경 가능성이 높다 . 회사의 기본 할일 정책을 아직 정하지 못했고, 오픈 직전까지 고민을 미루고 싶다. 최악의 경우 할인을 적용하지 않을 수 도 있다(미확정)
  
  - 인터페이스를 만들고 구현체를 언제든지 갈아끼울 수 있도록 설계하면 된다. 
  
**회원 도메인 협력 관계**
![](https://images.velog.io/images/jinii/post/40ce598d-0998-4777-a96c-fcd8490647e7/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-14%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%202.52.29.png)

**회원 클래스 다이어그램** (정적다이어그램)
클래스 다이어그램은 실제 서버를 실행하지 않고 클래스들만 분석해서 볼 수 있는 그림 그런데 구현체들은 서버가 뜰 때 new 할 때 실행 될 때 동적으로 결정됨
![](https://images.velog.io/images/jinii/post/5f11203e-d1e3-46ec-b9e4-3bb251aa9fe6/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-12-12%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%209.07.51.png)

**회원 객체 다이어그램** (동적 다이어그램)
클래스 다이어그램은  서버가 뜰 때 new 할 때 실행 될 때 동적으로 결정되므로 한눈에 보기 어렵다 . 그래서 실제 new 한 인스턴스 끼리의 참조를 볼 수 있는 객체 다이어그램을 사용한다. 
![](https://images.velog.io/images/jinii/post/9455e8d1-d2fd-40dc-85fd-0ecd948e7521/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-12-12%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%209.14.54.png)

**주문 도메인 협력 관계**

![](https://images.velog.io/images/jinii/post/a33720a6-07a8-4a15-bf27-2c907cdb150c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-14%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%203.56.18.png)

**주문 도메인 클래스 다이어그램**
![](https://images.velog.io/images/jinii/post/7742d215-a5a6-4526-b60e-5e3d3cb4dc89/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-12-12%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%209.13.10.png)

**주문 도메인 객체 다이어그램1**

![](https://images.velog.io/images/jinii/post/997e66ae-cb6a-49f1-af96-e07e66ae3583/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-14%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%204.03.53.png)

**주문 도메인 객체 다이어그램2**
![](https://images.velog.io/images/jinii/post/e6fe50d5-026b-492c-8945-873154e78d83/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-12-12%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%209.20.02.png) 

하지만 위의 그림과 같이 다이어그램을 작성하면 클라이언트인 OrderServiceImpl, MemberServiceImpl이 추상(인터페이스)에만 의존하지 않고 구체에도 의존하고 있다. 
그래서 다음과 같이 AppConfig를 두어서 애플리케이션 전반을 책임지고 클라이언트가 추상에만 의존하도록 해야한다 
![](https://images.velog.io/images/jinii/post/601753bb-e685-4519-a05c-6386b372eef3/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-15%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%205.10.36.png)
-> 관심사의 분리 (AOP)
**회원 객체 인스턴스 다이어그램**
appconfig 에서 생성한 memoryMemberRepositoryd의 주솟값을 memberServiceImpl을 생성할 때 함께 주입해줌  
![](https://images.velog.io/images/jinii/post/eeaa004c-a05e-48d0-98a2-852110c8f7d0/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-15%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%205.16.09.png)

** 그림 -사용, 구성의 분리 **

![](https://images.velog.io/images/jinii/post/e0438718-2f3f-4d5d-984d-5f4db3dae4af/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-15%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%205.30.38.png)

**할인 정책의 변경 **

![](https://images.velog.io/images/jinii/post/948898a7-f3c9-4f25-bcfb-8f51ce2e3ea1/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-15%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%205.36.02.png)
